{"version":3,"file":"index.dd7a27e3.js","sources":["../../vite/modulepreload-polyfill","../../src/bg.webp","../../react/jsx-runtime","../../src/components/Icon.tsx","../../src/components/Button.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export default \"__VITE_ASSET__35479b65__\"","import * as jsxRuntime from \"/home/runner/work/covid-free/covid-free/node_modules/react/jsx-runtime.js\"\nexport const jsx = jsxRuntime.jsx\nexport const jsxs = jsxRuntime.jsxs\nexport const Fragment = jsxRuntime.Fragment","export type IconProps = {\n  name: 'plus' | 'minus' | 'spin';\n  size?: number;\n};\n\nexport default function Icon({ name, size = 5 }: IconProps) {\n  if (name === 'plus') {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className={`h-${size} w-${size}`}\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    );\n  }\n\n  if (name === 'minus') {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className={`h-${size} w-${size}`}\n        viewBox=\"0 0 20 20\"\n        fill=\"currentColor\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\"\n          clipRule=\"evenodd\"\n        />\n      </svg>\n    );\n  }\n\n  if (name === 'spin') {\n    return (\n      <svg\n        className={`h-${size} w-${size} animate-spin`}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n      >\n        <circle\n          className=\"opacity-25\"\n          cx=\"12\"\n          cy=\"12\"\n          r=\"10\"\n          stroke=\"currentColor\"\n          stroke-width=\"4\"\n        />\n        <path\n          className=\"opacity-75\"\n          fill=\"currentColor\"\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n        />\n      </svg>\n    );\n  }\n\n  throw new Error('No Icon');\n}\n","import cx from 'classnames';\nimport Icon, { IconProps } from './Icon';\nimport './Button.css';\n\ninterface ButtonProps\n  extends React.DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n  > {\n  icon?: IconProps['name'];\n  color?: 'primary' | 'secondary';\n}\n\nexport default function Button({\n  type = 'button',\n  children,\n  className,\n  icon,\n  color = 'primary',\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      type={type}\n      {...props}\n      className={cx('custom-button', className, color)}\n    >\n      {icon && <Icon name={icon} />}\n      <span>{children}</span>\n    </button>\n  );\n}\n","import { useMemo } from 'react';\nimport { addDays, format, parse, setHours, startOfHour } from 'date-fns';\nimport ko from 'date-fns/locale/ko';\nimport { useFieldArray, useForm } from 'react-hook-form';\nimport { atom, useRecoilValue, useSetRecoilState } from 'recoil';\nimport bgImg from './bg.webp';\nimport Button from './components/Button';\n\ntype FormValues = {\n  housemates: {\n    date: string;\n    isVaccinated: boolean;\n  }[];\n};\n\nconst housematesState = atom<FormValues['housemates']>({\n  key: 'housemates',\n  default: [],\n});\n\nfunction App() {\n  return (\n    <div className=\"relative min-h-screen overflow-x-hidden\">\n      <img\n        src={bgImg}\n        alt=\"\"\n        className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-w-none\"\n      />\n      <div className=\"relative p-6 bg-white shadow-md ring-1 ring-gray-900/5 mx-4 sm:max-w-lg sm:mx-auto sm:rounded-lg my-4 sm:my-8 divide-y divide-gray-200\">\n        <Form />\n        <Result />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\nfunction Form() {\n  const setHousemates = useSetRecoilState(housematesState);\n\n  const { register, control, handleSubmit } = useForm<FormValues>({\n    mode: 'onChange',\n    defaultValues: {\n      housemates: [\n        {\n          date: format(new Date(), 'yyyy-MM-dd'),\n          isVaccinated: true,\n        },\n      ],\n    },\n  });\n\n  const { fields, append, remove, update } = useFieldArray({\n    name: 'housemates',\n    control,\n  });\n\n  const onSubmit = ({ housemates }: FormValues) => {\n    housemates.sort(({ date: a }, { date: b }) => {\n      if (a === b) return 0;\n      if (a === '') return 1;\n      if (b === '') return -1;\n      return a > b ? 1 : -1;\n    });\n    housemates.forEach(({ date, isVaccinated }, index) => {\n      update(index, {\n        date,\n        isVaccinated,\n      });\n    });\n    setHousemates(housemates);\n  };\n\n  return (\n    <form className=\"block\" onSubmit={handleSubmit(onSubmit)}>\n      <div>\n        <h2 className=\"text-lg font-semibold\">확진자 및 동거인</h2>\n        <p className=\"text-sm text-gray-400 mb-4\">\n          <span className=\"text-red-500 mr-2\">*</span>\n          <span>확진자의 1)증상발현일 또는 2)확진일을 입력하세요.</span>\n        </p>\n        {fields.map((field, index) => (\n          <div key={field.id} className=\"flex flex-wrap items-center mb-3\">\n            <div className=\"text-sm w-full mb-2 text-gray-700\">\n              {index + 1}번째 확진자 또는 동거인\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"date\"\n                disabled={field.date === ''}\n                {...register(`housemates.${index}.date` as const)}\n                className=\"px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400\n            focus:outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500\n            disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none\"\n              />\n              <Button\n                color=\"secondary\"\n                onClick={() => {\n                  update(index, {\n                    ...field,\n                    date:\n                      field.date === '' ? format(new Date(), 'yyyy-MM-dd') : '',\n                  });\n                }}\n              >\n                {field.date === '' ? '음성' : '양성'}\n              </Button>\n              <Button\n                color=\"secondary\"\n                onClick={() => {\n                  update(index, {\n                    ...field,\n                    isVaccinated: !field.isVaccinated,\n                  });\n                }}\n              >\n                {field.isVaccinated ? '접종자' : '비접종자'}\n              </Button>\n              {fields.length > 1 && (\n                <Button onClick={() => remove(index)}>삭제</Button>\n              )}\n            </div>\n          </div>\n        ))}\n        <Button\n          onClick={() =>\n            append({\n              date: format(new Date(), 'yyyy-MM-dd'),\n              isVaccinated: true,\n            })\n          }\n        >\n          동거인 추가\n        </Button>\n      </div>\n      <Button type=\"submit\" className=\"w-40 mx-auto !flex mt-4\">\n        계산\n      </Button>\n    </form>\n  );\n}\n\nfunction Result() {\n  const housemates = useRecoilValue(housematesState);\n\n  const data = useMemo(() => {\n    if (housemates.length === 0) {\n      return [];\n    }\n    const maxDate = housemates.reduce((acc, curr) => {\n      if (curr.date === '') return acc;\n      return acc > curr.date ? acc : curr.date;\n    }, '');\n    return housemates.map(({ date, isVaccinated }) =>\n      getFreeDay(date === '' ? maxDate : date, isVaccinated),\n    );\n  }, [housemates]);\n\n  if (housemates.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-6 pt-6\">\n      <h2 className=\"text-lg font-semibold\">격리해제일</h2>\n      <p className=\"text-sm text-gray-400 mb-4\">\n        <span className=\"text-red-500 mr-2\">*</span>\n        <span>증상에 따라 격리해제일이 연장될 수 있습니다.</span>\n      </p>\n      {data.map((date, index) => (\n        <div key={index} className=\"sm:flex sm:space-x-2 mt-2 sm:mt-1 text-sm\">\n          <div className=\"text-gray-500 font-semibold\">\n            {index + 1}번째 확진자 또는 동거인\n          </div>\n          <div>\n            {!housemates[index].isVaccinated &&\n            housemates[index].date !== '' ? (\n              <>\n                <div>{getFreeDay(housemates[index].date, true)} (치료종료)</div>\n                <div>{date} (격리해제)</div>\n              </>\n            ) : (\n              <div>{date}</div>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction getFreeDay(date: string, isVaccinated: boolean) {\n  const parsed = parse(date, 'yyyy-MM-dd', new Date());\n  const calculated = startOfHour(\n    setHours(addDays(parsed, isVaccinated ? 8 : 11), 12),\n  );\n  return format(calculated, 'yyyy.MM.dd a hh시', { locale: ko });\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"names":["jsxRuntime.jsx","jsxRuntime.jsxs","jsxRuntime.Fragment","name","size","Error","type","children","className","icon","color","props","cx","housematesState","atom","key","default","bgImg","setHousemates","useSetRecoilState","register","control","handleSubmit","useForm","mode","defaultValues","housemates","date","format","Date","isVaccinated","fields","append","remove","update","useFieldArray","sort","a","b","forEach","index","map","field","length","id","useRecoilValue","data","useMemo","maxDate","reduce","acc","curr","getFreeDay","parsed","parse","calculated","startOfHour","setHours","addDays","locale","ko","ReactDOM","render","RecoilRoot","document","getElementById"],"mappings":"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"}